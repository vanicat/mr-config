[DEFAULT]
todisk = true

fullsync = mr update && mr push

[.unison]
order=1
checkout = git clone git@github.com:vanicat/unison-conf.git .unison || 
         git clone git://github.com/vanicat/unison-conf.git .unison &&
         cd .unison &&
         make

[travail]
order=2
checkout = false
update = udisks --mount /dev/disk/by-id/usb-LaCie_RuggedKey_1301040000000197-0:0 || true
       git annex sync || true
       git annex get . || true
       udisks --unmount /dev/disk/by-id/usb-LaCie_RuggedKey_1301040000000197-0:0 || true

push   = git annex copy --to local --auto --quiet --fast
       git annex copy --to server --auto --quiet --fast
fetch  = git annex sync --quiet
record = git annex add .

todisk = git annex copy --to local --auto --quiet --fast
       udisks --mount /dev/disk/by-id/usb-LaCie_RuggedKey_1301040000000197-0:0
       cd /media/moi/Rugged_Key/travail || cd /media/Rugged_Key/travail
       mr update
       sync
       cd
       udisks --unmount /dev/disk/by-id/usb-LaCie_RuggedKey_1301040000000197-0:0

fullsync = udisks --mount /dev/disk/by-id/usb-LaCie_RuggedKey_1301040000000197-0:0 || true
       git annex sync || true
       git annex get . || true
       git annex copy --to local --auto --quiet --fast
       git annex copy --to server --auto --quiet --fast
       cd /media/moi/Rugged_Key/travail || cd /media/Rugged_Key/travail
       mr update
       sync
       cd
       udisks --unmount /dev/disk/by-id/usb-LaCie_RuggedKey_1301040000000197-0:0

[/media/Rugged_Key/travail/]
update = git annex sync --quiet 
         git annex get --fast --quiet cours/P_SSI cours/SpeTES cours/SpeTS cours/TESX cours/Trombi cours/TSTG

push   = git annex copy --to corbeau.bare --auto --quiet || git annex copy --to gobelin --auto --quiet
record = git annex sync --quiet

[/media/moi/Rugged_Key/travail/]
update = git annex sync --quiet 
         git annex get --fast --quiet cours/P_SSI cours/SpeTES cours/SpeTS cours/TESX cours/Trombi cours/TSTG

push   = git annex copy --to corbeau.bare --auto --quiet || git annex copy --to gobelin --auto --quiet
record = git annex sync --quiet

[.emacs.d]
checkout = git clone git@github.com:vanicat/emacs-starter-kit.git .emacs.d &&
         cd .emacs.d &&
         git submodule update --init &&
         (git submodule update --init --recursive || true) &&
         (cd src/magit/ && git checkout master) &&
         (cd snippets/text-mode/org-mode/ && git checkout master)

# [.emacs.d/src/gnus/]
# push = echo doing nothing
# update= echo doing nothing

[.emacs.d/src/magit/]
push = echo doing nothing

# [.emacs.d/src/rinari/]
# push = echo doing nothing

[.emacs.d/src/GIMME/]
push = echo doing nothing

[.myconfig]
fixups = make -L
checkout = git clone user-data@lot-of-stuff.info:git-repos/myconfig.git .myconfig/ &&
         git submodule update --init

[.config/awesome/]
checkout = git clone git@github.com:vanicat/awesome-configs.git awesome/  &&
         cd awesome/ &&
         git submodule update --init &&
         cd awesome-freedesktop &&
         git checkout master &&
         cd ..


[.config/awesome/awesome-freedesktop/]
push = echo doing nothing

[.config/awesome/obvious/]
push = echo doing nothing
update = echo doing nothing

[bin/]
checkout = git clone user-data@lot-of-stuff.info:git-repos/bin.git


[account/]
checkout = git clone user-data@lot-of-stuff.info:git-repos/account.git account

[org]
checkout = git clone user-data@lot-of-stuff.info:git-repos/org.git

[texmf]
checkout = git clone git@github.com:vanicat/myhead.git texmf
todisk = udisks --mount /dev/disk/by-id/usb-LaCie_RuggedKey_1301040000000197-0:0
       cd /media/moi/Rugged_Key/texmf || cd /media/Rugged_Key/texmf
       git fetch $HOST
       git merge $HOST/master
       sync
       cd
       udisks --unmount /dev/disk/by-id/usb-LaCie_RuggedKey_1301040000000197-0:0


[prog/ledger/ledger]
push = echo doing nothing

[Biblioth√®que calibre]
update = git annex sync ; git annex get
push = git annex add . 
     git annex sync
fullsync = git annex add .; git annex sync; git annex get 
